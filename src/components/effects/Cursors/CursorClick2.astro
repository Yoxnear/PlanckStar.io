---
import Layout from "/src/layouts/Layout.astro";
---

<Layout>
  <div
    class="relative flex justify-center items-center w-full h-screen bg-gray-950 overflow-hidden not-content"
  >
    <div
      id="click-container"
      class="absolute top-0 left-0 w-full h-full pointer-events-none"
    >
    </div>
  </div>
</Layout>

<script>
  const container = document.getElementById("click-container");

  function createRadialLines(x, y, count = 8) {
    const lines = [];
    for (let i = 0; i < count; i++) {
      const line = document.createElement("div");

      line.className = "absolute w-[2px] h-2 bg-white/40 rounded-sm rotate-90";
      line.style.left = `${x}px`;
      line.style.top = `${y}px`;
      line.angle = ((i * 360) / count) * (Math.PI / 180);
      line.distance = 0;
      container.appendChild(line);
      lines.push(line);
    }
    return lines;
  }

  window.addEventListener("click", (e) => {
    const rect = container.getBoundingClientRect();
    const mouseX = e.clientX - rect.left;
    const mouseY = e.clientY - rect.top;

    const lines = createRadialLines(mouseX, mouseY);

    function animateLines() {
      let alive = false;
      lines.forEach((line) => {
        if (line.distance < 30) {
          alive = true;
          line.distance += 0.8;
          line.style.transform = `translate(${Math.cos(line.angle) * line.distance}px, ${Math.sin(line.angle) * line.distance}px) rotate(${line.angle + Math.PI / 2}rad)`;
          line.style.opacity = 1 - line.distance / 30;
        } else {
          line.remove();
        }
      });
      if (alive) requestAnimationFrame(animateLines);
    }

    animateLines();
  });
</script>
