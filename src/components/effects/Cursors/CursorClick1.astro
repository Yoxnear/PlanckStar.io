---
// 3 Instructions in this component

// Start here adjusting the number of lines. ❶
const numberLines = 12;

// Adjust how far the lines will travel (px). ❷
const lineDistance = 150; 

// Choose the line color from Tailwind's color palette. ❸
const color = "bg-white/40"; 
---

<div
  class="relative w-full h-80 bg-gray-950 overflow-hidden not-content flex items-center justify-center"
>
  <p class="font-light uppercase">Click anywhere</p>
  <div
    id="click-container1"
    data-number={numberLines}
    data-distance={lineDistance}
    data-color={color}
    class="absolute top-0 left-0 w-full h-full pointer-events-none"
  >
  </div>
</div>

<script>
  const container1 = document.getElementById("click-container1");
  const numberLines = container1.dataset.number;
  const lineDistance = container1.dataset.distance;
  const color = container1.dataset.color;

  function createRadialLines(x, y, count = numberLines) {
    const lines = [];
    for (let i = 0; i < count; i++) {
      const line = document.createElement("div");
      line.className = `absolute w-[2px] h-5 ${color} rounded-sm`;
      line.style.left = `${x}px`;
      line.style.top = `${y}px`;
      line.angle = ((i * 360) / count) * (Math.PI / 180);
      line.distance = 0;
      container1.appendChild(line);
      lines.push(line);
    }
    return lines;
  }

  window.addEventListener("click", (e) => {
    const rect = container1.getBoundingClientRect();
    const mouseX = e.clientX - rect.left;
    const mouseY = e.clientY - rect.top;

    const lines = createRadialLines(mouseX, mouseY);

    function animateLines() {
      let alive = false;
      lines.forEach((line) => {
        if (line.distance < lineDistance) {
          alive = true;
          line.distance += 4;
          line.style.transform = `translate(${Math.cos(line.angle) * line.distance}px, ${Math.sin(line.angle) * line.distance}px) rotate(${line.angle}rad)`;
          line.style.opacity = 1 - line.distance / 150;
        } else {
          line.remove();
        }
      });
      if (alive) requestAnimationFrame(animateLines);
    }

    animateLines();
  });
</script>
